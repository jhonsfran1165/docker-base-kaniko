# -----------------------------------------------------------------
# development configuration ---------------------------------------
# -----------------------------------------------------------------
oceana:development:init:
  extends: .terraform-init
  variables:
    TERRAFORM_DIRECTORY: development
    PROJECT: oceana
    JSON_PLAN_FILE: development_plan.json

oceana:development:plan:
  extends: .terraform-plan
  variables:
    TERRAFORM_DIRECTORY: development
    PROJECT: oceana
    JSON_PLAN_FILE: development_plan.json
  needs: ["oceana:development:init"]

oceana:development:apply:
  stage: development
  extends: .terraform-deploy
  variables:
    TERRAFORM_DIRECTORY: development
    PROJECT: oceana
    JSON_PLAN_FILE: development_plan.json
  needs: ["oceana:development:plan"]

oceana:development:destroy:
  extends: .terraform-destroy
  variables:
    TERRAFORM_DIRECTORY: development
    PROJECT: oceana
    JSON_PLAN_FILE: development_plan.json
  needs: []

# -----------------------------------------------------------------
# production configuration ----------------------------------------
# -----------------------------------------------------------------
oceana:production:init:
  extends: .terraform-init
  variables:
    TERRAFORM_DIRECTORY: production
    PROJECT: oceana

oceana:production:plan:
  extends: .terraform-plan
  variables:
    TERRAFORM_DIRECTORY: production
    PROJECT: oceana
    JSON_PLAN_FILE: oceana_production_plan.json
  needs: ["oceana:development:init"]

oceana:production:apply:
  stage: production
  extends: .terraform-deploy
  variables:
    TERRAFORM_DIRECTORY: production
    PROJECT: oceana
  needs: ["oceana:production:plan"]

oceana:production:destroy:
  extends: .terraform-destroy
  variables:
    TERRAFORM_DIRECTORY: production
    PROJECT: oceana
  needs: []
